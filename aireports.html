<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Reports</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== RESET ===== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Segoe UI", sans-serif;
}

body{
  background:#eef6fb;
}

/* ================= HEADER ================= */
.header{
  height:74px;                 /* FIXED HEADER HEIGHT */
  padding:0 24px;              /* horizontal padding only */
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#ffffff;
  box-shadow:0 2px 8px rgba(0,0,0,0.05);
  position:sticky;
  top:0;
  z-index:1000;
}

.left-icons{
  display:flex;
  gap:14px;
  align-items:center;
}

.left-icons img{
  width:26px;
  height:26px;
  cursor:pointer;
}

.right-logo img{
  height:98px;      /* BIG LOGO */
  object-fit:contain;
}

/* ================= DASHBOARD LAYOUT ================= */
.dashboard{
  display:flex;
  gap:20px;
  padding:20px;
}

/* ================= SIDEBAR ================= */
.sidebar{
  width:220px;
  background:#ffffff;
  border-radius:10px;
  padding:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

.sidebar ul{
  list-style:none;
}

.sidebar li a{
  display:block;
  padding:10px;
  font-size:14px;
  border-radius:6px;
  text-decoration:none;
  color:#333;
  margin-bottom:6px;
  transition:all 0.2s;
}

.sidebar li a.active,
.sidebar li a:hover{
  background:#0b7d85;
  color:#fff;
}

/* ================= CENTER ================= */
.center{
  flex:1;
}

.card{
  background:#ffffff;
  border-radius:12px;
  padding:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  margin-bottom:20px;
}

.card h4{
  margin-bottom:15px;
}

/* ===== AI FORM ===== */
.center label{
  display:block;
  margin-bottom:6px;
  font-size:14px;
  color:#333;
}

.center select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}

.center button{
  margin-top:15px;
  width:100%;
  padding:10px;
  background:#0b7d85;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:14px;
  cursor:pointer;
}

.center button:hover{
  background:#095e64;
}

/* ================= RIGHT PANEL ================= */
.right{
  width:260px;
}

.quick-actions button{
  width:100%;
  padding:10px;
  margin-top:12px;
  border-radius:6px;
  border:1px solid #ccc;
  background:#ffffff;
  cursor:pointer;
  font-size:13px;
}

.quick-actions button:hover{
  background:#0b7d85;
  color:#ffffff;
  border-color:#0b7d85;
}

/* ================= RESPONSIVE ================= */
@media(max-width:900px){
  .dashboard{
    flex-direction:column;
  }

  .sidebar,
  .right{
    width:100%;
  }
}

@media(max-width:480px){
  .header{
    flex-direction:column;
    align-items:flex-start;
    gap:10px;
  }
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="right-logo">
    <img src="./clogo.png" alt="Logo">
  </div>
</div>

<!-- DASHBOARD -->
<div class="dashboard">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <ul>
      <li><a href="doctordashboard.html">Dashboard</a></li>
      <li><a href="aireports.html" class="active">AI Reports</a></li>
    </ul>
  </div>

  <!-- CENTER -->
  <div class="center">
    <div class="card">
      <h4>Generate AI Wellness Summary</h4>

      <label for="patientSelect">Select Patient</label>
      <select id="patientSelect">
        <option value="">-- Select Patient --</option>
      </select>

      <button id="generateBtn">Generate PDF</button>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <div class="card quick-actions">
      <h4>Quick Actions</h4>
      <button onclick="location.href='startconsultation.html'">Start Consultation</button>
      <button onclick="location.href='appointments.html'">Add New Appointment</button>
      <button onclick="location.href='patients.html'">View Patient Record</button>
    </div>
  </div>

</div>

<script>
/* -------- Load Patients -------- */
async function loadPatients() {
  try {
    const res = await fetch("/api/patients");
    if (!res.ok) throw new Error("Failed to load patients");

    const patients = await res.json();
    const select = document.getElementById("patientSelect");

    select.innerHTML = '<option value="">-- Select Patient --</option>';

    patients.forEach(patient => {
      const option = document.createElement("option");
      option.value = patient._id;
      option.textContent = patient.step1?.fullName || "Unnamed Patient";
      select.appendChild(option);
    });
  } catch (err) {
    alert("Unable to load patient list");
  }
}

loadPatients();

/* -------- Generate PDF -------- */
document.getElementById("generateBtn").addEventListener("click", () => {
  const patientId = document.getElementById("patientSelect").value;
  if (!patientId) {
    alert("Please select a patient!");
    return;
  }
  window.open(`/ai-summary/${patientId}`, "_blank");
});
</script>

</body>
</html>


